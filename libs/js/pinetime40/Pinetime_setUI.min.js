(function(c,d){var a={};"object"==typeof c&&(a=c,c=a.mode);var l=!0;global.WIDGETS&&WIDGETS.back&&(l=!1,WIDGETS.back.remove(c&&a.back));Pinetime.btnWatches&&(Pinetime.btnWatches.forEach(clearWatch),delete Pinetime.btnWatches);Pinetime.swipeHandler&&(Pinetime.removeListener("swipe",Pinetime.swipeHandler),delete Pinetime.swipeHandler);Pinetime.dragHandler&&(Pinetime.removeListener("drag",Pinetime.dragHandler),delete Pinetime.dragHandler);Pinetime.touchHandler&&(Pinetime.removeListener("touch",
Pinetime.touchHandler),delete Pinetime.touchHandler);delete Pinetime.uiRedraw;delete Pinetime.CLOCK;if(Pinetime.uiRemove){let b=Pinetime.uiRemove;delete Pinetime.uiRemove;b()}g.reset();if(c){if("updown"==c){var f=0;Pinetime.dragHandler=b=>{f+=b.dy;for(b.b||(f=0);32<Math.abs(f);)0<f?(f-=32,d(1)):(f+=32,d(-1))};Pinetime.on("drag",Pinetime.dragHandler);Pinetime.touchHandler=b=>{d()};Pinetime.btnWatches=[setWatch(function(){d()},BTN1,{repeat:1,edge:"falling"})]}else if("leftright"==c){var h=0;Pinetime.dragHandler=
b=>{h+=b.dx;for(b.b||(h=0);32<Math.abs(h);)0<h?(h-=32,d(1)):(h+=32,d(-1))};Pinetime.on("drag",Pinetime.dragHandler);Pinetime.touchHandler=b=>{d()};Pinetime.btnWatches=[setWatch(function(){d()},BTN1,{repeat:1,edge:"falling"})]}else if("clock"==c)Pinetime.CLOCK=1,Pinetime.btnWatches=[setWatch(Pinetime.showLauncher,BTN1,{repeat:1,edge:"falling"})];else if("clockupdown"==c)Pinetime.CLOCK=1,Pinetime.touchHandler=(b,e)=>{120>e.x||d(88<e.y?1:-1)},Pinetime.btnWatches=[setWatch(Pinetime.showLauncher,BTN1,
{repeat:1,edge:"falling"})];else if("custom"==c)a.clock&&(Pinetime.CLOCK=1),a.touch&&(Pinetime.touchHandler=a.touch),a.drag&&(Pinetime.dragHandler=a.drag,Pinetime.on("drag",Pinetime.dragHandler)),a.swipe&&(Pinetime.swipeHandler=a.swipe,Pinetime.on("swipe",Pinetime.swipeHandler)),a.btn?Pinetime.btnWatches=[setWatch(function(){a.btn(1)},BTN1,{repeat:1,edge:"falling"})]:a.clock&&(Pinetime.btnWatches=[setWatch(Pinetime.showLauncher,BTN1,{repeat:1,edge:"falling"})]);else throw Error("Unknown UI mode "+
E.toJS(c));a.remove&&(Pinetime.uiRemove=a.remove);a.redraw&&(Pinetime.uiRedraw=a.redraw);if(a.back){var m=(b,e)=>{36>e.y&&48>e.x&&(e.handled=!0,a.back())};Pinetime.on("touch",m);if(Pinetime.touchHandler){var n=Pinetime.touchHandler;Pinetime.touchHandler=(b,e)=>{e.handled||n(b,e)};Pinetime.on("touch",Pinetime.touchHandler)}var k;void 0===Pinetime.btnWatches&&(k=setWatch(function(){k=void 0;a.back()},BTN1,{edge:"falling"}));WIDGETS=Object.assign({back:{area:"tl",width:24,draw:b=>g.reset().setColor("#f00").drawImage(atob("GBiBAAAYAAH/gAf/4A//8B//+D///D///H/P/n+H/n8P/n4f/vwAP/wAP34f/n8P/n+H/n/P/j///D///B//+A//8Af/4AH/gAAYAA=="),
b.x,b.y),remove:b=>{k&&clearWatch(k);Pinetime.removeListener("touch",m);b||g.reset().clearRect({x:WIDGETS.back.x,y:WIDGETS.back.y,w:24,h:24});delete WIDGETS.back;b||Pinetime.drawWidgets()}}},global.WIDGETS);l&&Pinetime.drawWidgets()}else if(Pinetime.touchHandler)Pinetime.on("touch",Pinetime.touchHandler)}})