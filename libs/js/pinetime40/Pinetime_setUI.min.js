(function(d,c){function f(){try{Pinetime.buzz(30)}catch(a){}}var b={};"object"==typeof d&&(b=d,d=b.mode);var m=!0;global.WIDGETS&&WIDGETS.back&&(m=!1,WIDGETS.back.remove(d&&b.back));Pinetime.btnWatches&&(Pinetime.btnWatches.forEach(clearWatch),delete Pinetime.btnWatches);Pinetime.swipeHandler&&(Pinetime.removeListener("swipe",Pinetime.swipeHandler),delete Pinetime.swipeHandler);Pinetime.dragHandler&&(Pinetime.removeListener("drag",Pinetime.dragHandler),delete Pinetime.dragHandler);Pinetime.touchHandler&&
(Pinetime.removeListener("touch",Pinetime.touchHandler),delete Pinetime.touchHandler);delete Pinetime.uiRedraw;delete Pinetime.CLOCK;if(Pinetime.uiRemove){var p=Pinetime.uiRemove;delete Pinetime.uiRemove;p()}g.reset();if(d){if("updown"==d){var h=0;Pinetime.dragHandler=function(a){h+=a.dy;for(a.b||(h=0);32<Math.abs(h);)0<h?(h-=32,c(1)):(h+=32,c(-1)),Pinetime.buzz(20)};Pinetime.on("drag",Pinetime.dragHandler);Pinetime.touchHandler=function(a){f();c()};Pinetime.btnWatches=[setWatch(function(){f();c()},
BTN1,{repeat:1,edge:"falling"})]}else if("supdown"==d)Pinetime.swipeHandler=function(a,e){c(e)},Pinetime.on("swipe",Pinetime.swipeHandler),Pinetime.touchHandler=function(a){f();c()},Pinetime.btnWatches=[setWatch(function(){f();c()},BTN1,{repeat:1,edge:"falling"})];else if("sleftright"==d)Pinetime.swipeHandler=function(a,e){c(a)},Pinetime.on("swipe",Pinetime.swipeHandler),Pinetime.touchHandler=function(a){f();c()},Pinetime.btnWatches=[setWatch(function(){f();c()},BTN1,{repeat:1,edge:"falling"})];else if("leftright"==
d){var k=0;Pinetime.dragHandler=function(a){k+=a.dx;for(a.b||(k=0);32<Math.abs(k);)0<k?(k-=32,c(1)):(k+=32,c(-1)),Pinetime.buzz(20)};Pinetime.on("drag",Pinetime.dragHandler);Pinetime.touchHandler=function(a){f();c()};Pinetime.btnWatches=[setWatch(function(){f();c()},BTN1,{repeat:1,edge:"falling"})]}else if("clock"==d)Pinetime.CLOCK=1,Pinetime.btnWatches=[setWatch(Pinetime.showLauncher,BTN1,{repeat:1,edge:"falling"})];else if("clockupdown"==d)Pinetime.CLOCK=1,Pinetime.touchHandler=function(a,e){120>
e.x||(f(),c(88<e.y?1:-1))},Pinetime.btnWatches=[setWatch(Pinetime.showLauncher,BTN1,{repeat:1,edge:"falling"})];else if("custom"==d)b.clock&&(Pinetime.CLOCK=1),b.touch&&(Pinetime.touchHandler=b.touch),b.drag&&(Pinetime.dragHandler=b.drag,Pinetime.on("drag",Pinetime.dragHandler)),b.swipe&&(Pinetime.swipeHandler=b.swipe,Pinetime.on("swipe",Pinetime.swipeHandler)),b.btn?Pinetime.btnWatches=[setWatch(function(){b.btn(1)},BTN1,{repeat:1,edge:"falling"})]:b.clock&&(Pinetime.btnWatches=[setWatch(Pinetime.showLauncher,
BTN1,{repeat:1,edge:"falling"})]);else throw Error("Unknown UI mode "+E.toJS(d));b.remove&&(Pinetime.uiRemove=b.remove);b.redraw&&(Pinetime.uiRedraw=b.redraw);if(b.back){var n=function(a,e){36>e.y&&48>e.x&&(e.handled=!0,b.back())};Pinetime.on("touch",n);if(Pinetime.touchHandler){var q=Pinetime.touchHandler;Pinetime.touchHandler=function(a,e){e.handled||q(a,e)};Pinetime.on("touch",Pinetime.touchHandler)}var l;void 0===Pinetime.btnWatches&&(l=setWatch(function(){l=void 0;b.back()},BTN1,{edge:"falling"}));
WIDGETS=Object.assign({back:{area:"tl",width:24,draw:function(a){return g.reset().setColor("#f00").drawImage(atob("GBiBAAAYAAH/gAf/4A//8B//+D///D///H/P/n+H/n8P/n4f/vwAP/wAP34f/n8P/n+H/n/P/j///D///B//+A//8Af/4AH/gAAYAA=="),a.x,a.y)},remove:function(a){l&&clearWatch(l);Pinetime.removeListener("touch",n);a||g.reset().clearRect({x:WIDGETS.back.x,y:WIDGETS.back.y,w:24,h:24});delete WIDGETS.back;a||Pinetime.drawWidgets()}}},global.WIDGETS);m&&Pinetime.drawWidgets()}else if(Pinetime.touchHandler)Pinetime.on("touch",
Pinetime.touchHandler)}})